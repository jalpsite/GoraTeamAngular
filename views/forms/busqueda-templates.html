<div class="row" ng-if="RolAdmin">
	<div class="col-xs-12 col-sm-7 col-md-7 col-lg-4">
		<h1 class="page-title txt-color-blueDark">
			<i class="fa fa-table fa-fw "></i> 
				Consultas 
			<span>> 
				Competencias, Habilidades y Atributos
			</span>
		</h1>
	</div>
</div>

<!-- widget grid -->
<section id="widget-grid" class="" ng-if="RolAdmin">

	<div class="row">
		<article class="col-sm-12 col-md-12 col-lg-12">
			<!-- Widget ID (each widget will need unique ID)-->
			<div class="jarviswidget jarviswidget-color-red" id="wid-id-110" data-widget-editbutton="false" data-widget-custombutton="false" data-widget-colorbutton="false" data-widget-fullscreenbutton="false" data-widget-deletebutton="false" data-widget-sortable="false" >

				<header>
					<span class="widget-icon"> <i class="fa fa-check"></i> </span>
					<h2>Consultas</h2>

				</header>

				<!-- widget div-->
				<div>

					<!-- widget edit box -->
					<div class="jarviswidget-editbox">
						<!-- This area used as dropdown edit box -->

					</div>
					<!-- end widget edit box -->

					<!-- widget content -->
					<div class="widget-body">

						<div class="row">
							<form action="" id="wizard-1" class="smart-form" novalidate="novalidate" ng-controller="ControladorDatosCompetencia" data-ng-init="init()">	
								<fieldset>
									<div class="row">
										<section class="col col-6">
											<label>Competencias</label>
											<label class="select">
												<select multiple class="select2" name="cboCompetencia" style="width:100%" id="cboCompetencia" ng-model="seleccCompetencia" ng-options="opt as opt[1] for opt in items4"  ng-init="seleccCompetencia = null" ng-change="updateArrayCompetencia()">
												<option value="" ng-disabled="!!seleccCompetencia">Seleccione Compentencia</option>	
												</select><i></i>
											</label>
										</section>																			
									</div>
									<div class="row">
										<section class="col col-6">
											<label>Habilidades</label>
											<label class="select">
												<select multiple class="select2" name="cboHabilidad" style="width:100%" id="cboHabilidad" ng-model="seleccHabilidad" ng-options="opt as opt[1] for opt in items5" ng-init="seleccHabilidad = null" ng-change="updateArrayHabilidad()">
												<option value="" ng-disabled="!!seleccHabilidad">Seleccione Habilidad</option>	
												</select><i></i>
											</label>
										</section>
									</div>
									<div class="row">
										<section class="col col-6">
											<label>Atributos</label>
											<label class="select">
												<select multiple class="select2" name="cboAtributo" style="width:100%" id="cboAtributo" ng-model="seleccAtributo" ng-options="opt as opt[1] for opt in items6" ng-init="seleccAtributo = null" ng-change="updateArrayAtributo()">
												<option value="" ng-disabled="!!seleccAtributo">Seleccione Atributo</option>
												</select><i></i>
											</label>
										</section>
									</div>					
								</fieldset>
								<fieldset>									
									<section>
																				
										<div class="table-responsive">
											
											<div style="text-align:right">
											
											<span class="label {{paginacion>1?'hide':''}}" style="display: table-cell; vertical-align: middle;">Pagina: {{pagina}} de {{paginacion}} | {{totalResultados}} resultados en total.</span>										
											<ul class="pagination {{paginacion<=1?'hide':''}}" style="margin-left:20px;" >
												<li><span class="label" style="display: table-cell; vertical-align: middle;">Pagina: {{pagina}} de {{paginacion}} | {{totalResultados}} resultados en total.</span>										</li>
												<li class="active {{flag<9?'hide':''}}">
													<a href="javascript:void(0);" ng-click="updatePagina(1)" style="cursor:pointer;"><i class="fa fa-fast-backward"></i></a>
												</li>
												<li class="{{pagina==1?'hide':''}}">
													<a href="javascript:void(0);" ng-click="pagina==1?'':updatePagina(pagina-1)"><i class="fa fa-arrow-left"></i></a>
												</li>
												<li ng-repeat="i in paginasMostrar track by $index" class="{{i==pagina?'active':''}}">
													<a class="" href="javascript:void(0);" ng-click="pagina!=i?updatePagina(i):''">{{i}}</a>
												</li>
												<li class="{{pagina==paginacion?'hide':''}}">
													<a href="javascript:void(0);" ng-click="pagina<paginacion?updatePagina(pagina+1):updatePagina(pagina)"><i class="fa fa-arrow-right"></i></a>
												</li>												
											</ul>
											</div>
											
											<table class="table table-bordered" id="tbBusqueda">
												<thead>
													<tr>
														<th rowspan="2" style="text-align: center; vertical-align: middle;">Nombres</th>
														<th rowspan="2" style="text-align: center; vertical-align: middle;">Apellidos</th>
														<th rowspan="2" style="text-align: center; vertical-align: middle;">Email</th>
														<th rowspan="2" style="text-align: center; vertical-align: middle;">Teléfono</th>
														<th rowspan="2" style="text-align: center; vertical-align: middle;">Atributos</th>
														<th colspan="4" style="text-align: center; vertical-align: middle;">Jefe Inmediato</th>
													</tr>
													<tr>
														<th rowspan="2" style="text-align: center; vertical-align: middle;">Nombres</th>
														<th rowspan="2" style="text-align: center; vertical-align: middle;">Apellidos</th>
														<th rowspan="2" style="text-align: center; vertical-align: middle;">Email</th>
														<th rowspan="2" style="text-align: center; vertical-align: middle;">Teléfono</th>
													</tr>
												</thead>
												<tbody>
													<tr ng-repeat="personaComp in listPersonaCompetencia" >
														<td>{{personaComp.nombres}}</td>
														<td>{{personaComp.apellidos}}</td>
														<td><a href-void class="btn btn-link" ng-click="cargarEmails(personaComp.idPerson)">Ver emails</a></td>
														<td><a href-void class="btn btn-link" ng-click="cargarTelefonos(personaComp.idPerson)">Ver teléfonos</a></td>
														<td><a href-void class="btn btn-link" ng-click="cargarAtributos(personaComp.idPerson)">Ver atritutos</a></td>
														<td>{{personaComp.nombresJefe}}</td>
														<td>{{personaComp.apellidosJefe}}</td>
														<td><a href-void class="btn btn-link" ng-click="cargarEmails(personaComp.idJefe)">{{isExisteId(personaComp.idJefe) ? "Ver emails" : ""}}</a></td>
														<td><a href-void class="btn btn-link" ng-click="cargarTelefonos(personaComp.idJefe)">{{isExisteId(personaComp.idJefe) ? "Ver teléfonos" : ""}}</a></td>
														
													</tr>
													<tr ng-if="listPersonaCompetencia.length == 0">
														<td colspan="9" style="text-align:center;">
														  <strong>No se encontraron coincidencias</strong>
														</td>
													</tr>
												</tbody>
											</table>
											
										</div>	
									</section>
								</fieldset>
							</form>
						</div>

					</div>
					<!-- end widget content -->
				</div>
				<!-- end widget div -->
			</div>
			<!-- end widget -->								
		</article>
		<!-- END COL -->		
	</div>
	<!-- END ROW -->
</section>
<!-- end widget grid -->

<div id="dialog_atributo" style="overflow-y: auto;" ng-if="RolAdmin">
	<table class="table table-bordered">
		<thead>
			<tr>
				<th style="text-align: center; vertical-align: middle;">Competencia</th>
				<th style="text-align: center; vertical-align: middle;">Habilidad</th>
				<th style="text-align: center; vertical-align: middle;">Atributo</th>
			</tr>
		</thead>
		<tbody>
		</tbody>
	</table>
</div>

<div id="dialog_email" ng-if="RolAdmin">
	<table class="table table-bordered">
		<thead>
			<tr>
				<th style="text-align: center; vertical-align: middle;">Email</th>
				<th style="text-align: center; vertical-align: middle;">Tipo</th>
				<th style="text-align: center; vertical-align: middle;">Estado</th>
			</tr>
		</thead>
		<tbody>
		</tbody>
	</table>
</div>

<div id="dialog_telefono" ng-if="RolAdmin">
	<table class="table table-bordered">
		<thead>
			<tr>
				<th style="text-align: center; vertical-align: middle;">Teléfono</th>
				<th style="text-align: center; vertical-align: middle;">Tipo</th>
				<th style="text-align: center; vertical-align: middle;">Estado</th>
			</tr>
		</thead>
		<tbody>
		</tbody>
	</table>
</div>

<script src="Controlador/busquedaCompetencia.js"></script>
<script type="text/javascript">

	// DO NOT REMOVE : GLOBAL FUNCTIONS!

	$(document).ready(function() {
		
		pageSetUp();
			
	})

</script>
